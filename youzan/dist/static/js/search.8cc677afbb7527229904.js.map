{"version":3,"sources":["webpack:///./src/modules/js/avInit.js","webpack:///./src/modules/js/api.js","webpack:///./src/modules/js/mixin.js","webpack:///./src/pages/search/search.js"],"names":["av_min_default","a","init","appId","appKey","__webpack_exports__","objName","Query","find","then","data","map","item","extends_default","attributes","toast_default","message","position","duration","mixin","filters","floatnum","value","strValue","String","indexOf","split","length","__WEBPACK_IMPORTED_MODULE_4_vue__","use","__WEBPACK_IMPORTED_MODULE_1_mint_ui_lib_infinite_scroll___default","el","searchWord","isJumpToBtnShow","goodList","lists","loading","isUserScroll","isInitSuccess","isListDone","pageNum","methods","loadMore","_this","this","setTimeout","getGoodList","listenToWindowScroll","_this2","window","ontouchmove","e","type","_this3","Object","__WEBPACK_IMPORTED_MODULE_5_js_api_js__","res","i","eventId","setInterval","clearInterval","push","move","document","documentElement","scrollTop","goToTop","__WEBPACK_IMPORTED_MODULE_8_velocity_animate___default","body","created","__WEBPACK_IMPORTED_MODULE_6_qs___default","parse","location","href","keyword","mixins","__WEBPACK_IMPORTED_MODULE_7_js_mixin_js__"],"mappings":"6NAKAA,EAAAC,EAAGC,MACCC,MAJS,oCAKTC,OAJU,6BCEdC,EAAA,WAAwBC,GAEpB,OADY,IAAIN,EAAAC,EAAGM,MAAMD,GACZE,OAAOC,KAAK,SAAAC,GACrB,OAAOA,EAAKC,IAAI,SAAAC,GAAS,OAAAC,OAAWD,EAAKE,eAC3C,WACEC,KACIC,QAAS,OACTC,SAAU,SACVC,SAAU,+CCbtB,IAAIC,GACAC,SACIC,SADK,SACIC,GACL,IAAIC,EAAWC,OAAOF,GACtB,OAA+B,IAA3BC,EAASE,QAAQ,KACVF,EAAW,MAEqB,IAAlCA,EAASG,MAAM,KAAK,GAAGC,OACrBJ,EAAW,IAGXA,KAMvBlB,EAAA,8PCPAuB,EAAA,QAAIC,IAAJC,EAAA7B,GAEA,IAAI2B,EAAA,SACAG,GAAI,OACJrB,MACIsB,WAAY,GACZC,iBAAiB,EACjBC,UACIC,MAAO,KACPC,SAAS,EACTC,cAAc,EACdC,eAAe,EACfC,YAAY,EACZC,QAAS,IAGjBC,SACIC,SADK,WACM,IAAAC,EAAAC,KACFA,KAAKV,SAASG,cAAiBO,KAAKV,SAASI,gBAAiBM,KAAKV,SAASK,aACjFK,KAAKV,SAASE,SAAU,EACxBS,WAAW,WACPF,EAAKG,eACN,OAEPC,qBARK,WAQkB,IAAAC,EAAAJ,KACnBK,OAAOC,YAAc,SAACC,GAClBH,EAAKd,SAASG,cAAe,EAC7BY,OAAOC,YAAc,OAG7BJ,YAdK,SAcOM,GAAM,IAAAC,EAAAT,KACdU,OAAAC,EAAA,EAAAD,CAAc,cAAc7C,KAAK,SAAA+C,GAC7B,IAAIC,EAAI,EACHJ,EAAKnB,SAASC,QAAQkB,EAAKnB,SAASC,UACzC,IAAIuB,EAAUC,YAAY,WACtB,IAAKH,EAAIC,GAUL,OATAJ,EAAKnB,SAASE,SAAU,EACX,UAATgB,IACAC,EAAKnB,SAASI,eAAgB,GAElCe,EAAKnB,SAASM,SAAW,EACK,IAA1Ba,EAAKnB,SAASM,UACda,EAAKnB,SAASK,YAAa,QAE/BqB,cAAcF,GAGdL,EAAKnB,SAASC,MAAM0B,KAAKL,EAAIC,IAC7BA,KAEL,QAGXK,KArCK,WAsCDlB,KAAKX,gBAAkB8B,SAASC,gBAAgBC,UAAY,KAEhEC,QAxCK,WAyCDC,IAASJ,SAASK,KAAM,UAAWlD,SAAU,MAC7C0B,KAAKX,iBAAkB,IAG/BoC,QA3DI,WA4DAzB,KAAKE,YAAY,SACjBF,KAAKZ,WAAasC,EAAArE,EAAGsE,MAAMtB,OAAOuB,SAASC,KAAK/C,MAAM,KAAK,IAAIgD,QAC/D9B,KAAKG,wBAET4B,QAASC,EAAA","file":"static/js/search.8cc677afbb7527229904.js","sourcesContent":["import AV from \"leancloud-storage\"\n\nlet APP_ID = 'IOdBWAtbQXIu491P7ldb0gB6-gzGzoHsz';\nlet APP_KEY = 'qlHMaucWHOv4mW5yejNzJf6V';\n\nAV.init({\n    appId: APP_ID,\n    appKey: APP_KEY\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/avInit.js","import AV from \"leancloud-storage\"\nimport \"js/avInit.js\"\n\nimport { Toast } from 'mint-ui';\n\nexport default function(objName){\n    var query = new AV.Query(objName)\n    return query.find().then(data => {\n        return data.map(item => {return {...item.attributes}})\n    },() => {\n        Toast({\n            message: '网络异常',\n            position: 'bottom',\n            duration: 2500\n        })\n    })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/api.js","let mixin = {\n    filters: {\n        floatnum(value) {\n            let strValue = String(value)\n            if (strValue.indexOf(\".\") === -1) {\n                return strValue + \".00\"\n            }\n            else if (strValue.split(\".\")[1].length === 1) {\n                return strValue + \"0\"\n            }\n            else {\n                return strValue\n            }\n        }\n    }\n}\n\nexport default mixin\n\n\n// WEBPACK FOOTER //\n// ./src/modules/js/mixin.js","import \"css/common.css\"\nimport \"./search.css\"\n\nimport Vue from \"vue\"\nimport leanCloudTool from \"js/api.js\"\nimport qs from \"qs\"\nimport mixin from \"js/mixin.js\"\nimport { InfiniteScroll } from 'mint-ui';\nimport Velocity from 'velocity-animate'\n\nVue.use(InfiniteScroll);\n\nnew Vue({\n    el: \"#app\",\n    data: {\n        searchWord: \"\",\n        isJumpToBtnShow: false,\n        goodList: {\n            lists: null,\n            loading: false,\n            isUserScroll: false,\n            isInitSuccess: false,\n            isListDone: false,\n            pageNum: 0,\n        },\n    },\n    methods: {\n        loadMore() {\n            if (!this.goodList.isUserScroll || !this.goodList.isInitSuccess || this.goodList.isListDone) {return}\n            this.goodList.loading = true\n            setTimeout(() => {\n                this.getGoodList()\n            }, 200);\n        },\n        listenToWindowScroll() {\n            window.ontouchmove = (e) => {\n                this.goodList.isUserScroll = true\n                window.ontouchmove = null\n            }\n        },\n        getGoodList(type) {\n            leanCloudTool(\"searchList\").then(res => {\n                let i = 0\n                if (!this.goodList.lists) {this.goodList.lists = []}\n                let eventId = setInterval(() => {\n                    if (!res[i]) {\n                        this.goodList.loading = false\n                        if (type === \"first\") {\n                            this.goodList.isInitSuccess = true\n                        }\n                        this.goodList.pageNum += 1\n                        if (this.goodList.pageNum === 6) {\n                            this.goodList.isListDone = true\n                        }\n                        clearInterval(eventId)\n                        return\n                    } else {\n                        this.goodList.lists.push(res[i])\n                        i++\n                    }\n                }, 200)\n            })\n        },\n        move() {\n            this.isJumpToBtnShow = document.documentElement.scrollTop > 100\n        },\n        goToTop() {\n            Velocity(document.body, \"scroll\", {duration: 300})\n            this.isJumpToBtnShow = false\n        }\n    },\n    created() {\n        this.getGoodList(\"first\")\n        this.searchWord = qs.parse(window.location.href.split(\"?\")[1]).keyword\n        this.listenToWindowScroll()\n    },\n    mixins: [mixin],\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/search/search.js"],"sourceRoot":""}